(window.webpackJsonp=window.webpackJsonp||[]).push([["2356"],{"5qSd":function(t,e,n){"use strict";n.r(e),n.d(e,"setMapUrlSource",function(){return k}),n.d(e,"default",function(){return A});var a=n("eVuF"),o=n.n(a),c=n("dfwq"),i=n("ln6h"),r=n.n(i),l=n("v7dG"),u=n("M/cP"),p=n("O40h"),s=n("0iUn"),d=n("sLSF"),f=n("MI3g"),g=n("a7VT"),b=n("AT/M"),h=n("Tit0"),m=n("vYYK"),v=n("pLtp"),j=n.n(v),O=n("q1tI"),q=n.n(O),w=n("MuZe"),L=n.n(w),M=n("LZdz"),y={tMap:"https://map.qq.com/api/js?v=2.exp&key=",bMap:"",aMap:""},k=function(t){j()(y).map(function(e){y[e]=t[e]})},A=function(t){function e(){var t,n;Object(s.default)(this,e);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return n=Object(f.default)(this,(t=Object(g.default)(e)).call.apply(t,[this].concat(o))),Object(m.a)(Object(b.default)(n),"state",{}),Object(m.a)(Object(b.default)(n),"node",null),Object(m.a)(Object(b.default)(n),"location",void 0),Object(m.a)(Object(b.default)(n),"geolocation",null),Object(m.a)(Object(b.default)(n),"geocoder",null),Object(m.a)(Object(b.default)(n),"events",[]),n}return Object(h.default)(e,t),Object(d.default)(e,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var t=this,e=this.props,n=e.onLocationError,a=e.initLatLng,o=e.onLocationAddr,c=!0;this.getScriptFile().then(function(){window.tMapInit=Object(p.default)(r.a.mark(function e(){var i,p,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=a?new qq.maps.LatLng(a.lat,a.lng):new qq.maps.LatLng(39.916527,116.397128),p=new qq.maps.Map(t.node,{zoom:16,center:i}),(s=new qq.maps.Geocoder).setComplete(function(t){if(Object(u.a)(o)&&o(t.detail),c){p.setCenter(t.detail.location);var e=new qq.maps.Marker({map:p,draggable:!0,position:t.detail.location});qq.maps.event.addListener(e,"dragend",function(t){var e=new qq.maps.LatLng(t.latLng.lat,t.latLng.lng);s.getAddress(e)}),c=!1}}),s.setError(function(){alert("出错了，请输入正确的经纬度！！！")}),location?t.getLocation().then(function(t){var e=t.lat,n=t.lng;l.a.isMobile||(e+=.008081,n-=.005184);var a=new qq.maps.LatLng(e,n);s.getAddress(a)}).catch(function(){Object(u.a)(n)&&n()}):Object(u.a)(o)&&o({lat:a?a.lat:39.916527,lng:a?a.lng:116.397128});case 6:case"end":return e.stop()}},e)}))}).catch(function(){var e=t.props.onLoadUrlError;Object(u.a)(e)&&e()})}},{key:"render",value:function(){var t=this,e=this.props,n=e.width,a=e.height;return q.a.createElement("div",{className:Object(M.a)("map"),style:{height:a,width:n},ref:function(e){return t.node=e}})}},{key:"getScriptFile",value:function(){var t=this.props,e=t.extendUrls,n=t.type,a=t.apiKey,i=t.urlParams,r=[y[n]+a+(i?"&libraries="+i:"")+"&callback=tMapInit"].concat(Object(c.default)(e||[]));"tMap"===n&&r.push("https://3gimg.qq.com/lightmap/components/geolocation/geolocation.min.js");var l=r.map(function(t){return new o.a(function(e,n){L()(t,function(t){t?n(t):e()})})});return o.a.all(l)}},{key:"getLocation",value:function(){var t=this;return new o.a(function(e,n){var a=t.props,o=a.apiKey,c=a.type,i=a.appName;if("tMap"===c)return t.geolocation=new qq.maps.Geolocation(o,i||"mukaMap"),void t.geolocation.getLocation(function(t){e(t)},function(t){n(t)},{timeout:8e3})})}}]),e}(O.Component);Object(m.a)(A,"defaultProps",{type:"tMap",height:600,width:800,apiKey:"",extendUrls:[]})}}]);